<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Debounce and Throttle</title>
</head>
<style>
    .button-wrapper{
        padding-top:200px;
        display:flex;
        justify-content: center;
        align-items: center;
    }
</style>
<body>
<div class="button-wrapper">
    <button class="debounce">防抖</button>
    <button class="throttle">节流</button>
    <button class="test">打印this</button>
</div>
<script>
    const $ = s => document.querySelector(s)
    const $$ = s => Array.from(document.querySelectorAll(s))

    const debounce = (fn,delay)=>{
        let timeout
        return ()=>{
            if(timeout){
                clearTimeout(timeout)
            }
            timeout = setTimeout(fn,delay)
        }
    }
    const throttle = (fn,threshold)=>{
        let currentDate
        return ()=>{
            let newDate = new Date
            if(currentDate && newDate - currentDate < threshold) {
                return
            }
            currentDate = newDate
            fn()
        }
    }

    $('button.test').addEventListener('click',function(){
        console.log(this)
    })
    $('button.debounce').addEventListener('click',debounce(function(){
        console.log('这是一个防抖函数')
    },1000))

    $('button.throttle').addEventListener('click',throttle(function(){
        console.log('这是一个节流函数')
    },1000))

</script>
</body>
</html>